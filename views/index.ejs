<!-- index.ejs -->

<!DOCTYPE html>
<html lang="en">
    <% include ./partials/head %>

    <body id="page-top">
        <!-- Navigation -->
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
          <div class="container">
            <a class="navbar-brand js-scroll-trigger" href="#page-top">Cargo Bikes</a>
            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
              Menu
              <i class="fa fa-bars"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
              <ul class="navbar-nav text-uppercase ml-auto">
                <li class="nav-item">
                  <a class="nav-link js-scroll-trigger" href="#consignmentsTable">Consignments</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link js-scroll-trigger" href="#citymap">City map</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link js-scroll-trigger" href="#contact">Contact</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link js-scroll-trigger" href="/user/register">Register</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link js-scroll-trigger" href="/user/login">Log In</a>
                </li>
              </ul>
            </div>
          </div>
        </nav>

        <!-- Header -->
        <header class="masthead">
          <div class="container">
            <div class="intro-text">
              <div class="intro-lead-in">Welcome to CargoBike Krakow!</div>
              <div class="intro-heading text-uppercase">Get your cargo to be delivered by bike</div>
              <a class="btn btn-primary btn-xl text-uppercase js-scroll-trigger" href="/user/register">Register</a>
            </div>
          </div>
        </header>

        <!-- Consignments Table-->
        <section id="consignmentsTable">
          <div class="container">
            <div class="row">
              <div class="col-lg-12 text-center">
                <h2 class="section-heading text-uppercase">Requests for deliveries</h2>
                <h3 class="section-subheading text-muted">consignments to be delivered by bikes </h3>
              </div>
            </div>

            <div class="row text-center">
              <table class="table table-striped">
                <thead>
                  <tr>
                    <th scope="col">Description</th>
                    <th scope="col">Weight [kg]</th>
                    <th scope="col">Latitude</th>
                    <th scope="col">Longitude</th>
                    <th scope="col">Status</th>
                  </tr>
                </thead>
                <tbody>
                  <% for(var i = 0; i < consignments.length; i++) { %>
                    <tr>
                      <td><%= consignments[i].description %></td>
                      <td class="weight"><%= consignments[i].weight %></td>
                      <td class="lat"><%= consignments[i].lat %></td>
                      <td class="lng"><%= consignments[i].lng %></td>
                      <td><%= consignments[i].status %></td>
                    </tr>
                  <% } %>
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- Map -->
        <section id="citymap">
          <div class="container">
            <div class="row">
              <div class="col-lg-12 text-center">
                <h2 class="section-heading text-uppercase">Krakow City Map</h2>
              </div>
              <div class="col-lg-12" id="map" width="100%" height="100%">
              </div>
            </div>
          </div>
        </section>

        <!-- Contact -->
        <section id="contact">
          <div class="container">
            <div class="row">
              <div class="col-lg-12 text-center">
                <h2 class="section-heading text-uppercase">Contact Us</h2>
                <h3 class="section-subheading text-muted">share your opinion or suggestions</h3>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-12">
                <form id="contactForm" name="sentMessage" novalidate>
                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group">
                        <input class="form-control" id="name"
                               type="text" placeholder="Your Name *"
                        required data-validation-required-message="Please enter your name.">
                        <p class="help-block text-danger"></p>
                      </div>
                      <div class="form-group">
                        <input class="form-control" id="email"
                               type="email" placeholder="Your Email *"
                               required data-validation-required-message="Please enter your email address.">
                        <p class="help-block text-danger"></p>
                      </div>
                      <div class="form-group">
                        <input class="form-control" id="phone"
                               type="tel" placeholder="Your Phone *"
                               required data-validation-required-message="Please enter your phone number.">
                        <p class="help-block text-danger"></p>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group">
                        <textarea class="form-control" id="message"
                        placeholder="Your Message *"
                        required data-validation-required-message="Please enter a message."></textarea>
                        <p class="help-block text-danger"></p>
                      </div>
                    </div>
                    <div class="clearfix"></div>
                    <div class="col-lg-12 text-center">
                      <div id="success"></div>
                      <button id="sendMessageButton"
                              class="btn btn-primary btn-xl text-uppercase"
                              type="submit">
                        Send Message
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </section>

        <!-- Footer -->
        <footer>
          <div class="container">
            <div class="row">
              <div class="col-md-4">
                <span class="copyright">Copyright &copy; Cargo Bikes Krakow 2018</span>
              </div>
              <div class="col-md-4">
                <ul class="list-inline social-buttons">
                  <li class="list-inline-item">
                    <a href="#">
                      <i class="fa fa-twitter"></i>
                    </a>
                  </li>
                  <li class="list-inline-item">
                    <a href="#">
                      <i class="fa fa-facebook"></i>
                    </a>
                  </li>
                  <li class="list-inline-item">
                    <a href="#">
                      <i class="fa fa-linkedin"></i>
                    </a>
                  </li>
                </ul>
              </div>
              <div class="col-md-4">
                <ul class="list-inline quicklinks">
                  <li class="list-inline-item">
                    <a href="#">Privacy Policy</a>
                  </li>
                  <li class="list-inline-item">
                    <a href="#">Terms of Use</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </footer>
    </body>

    <!-- Bootstrap core JavaScript -->
    <script src="/vendor/jquery/jquery.min.js"></script>
    <script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- Plugin JavaScript -->
    <script src="/vendor/jquery-easing/jquery.easing.min.js"></script>
    <!-- Contact form JavaScript -->
    <script src="/js/jqBootstrapValidation.js"></script>
    <script src="/js/contact_me.js"></script>
    <!-- Custom scripts for this template -->
    <script src="/js/agency.min.js"></script>

    <!-- Google Map -->
    <script>
      var map;
      var latTD = $(".lat"), lngTD = $(".lng"), wTD = $(".weight");
      var ms = [];

      for (var i = 0; i < latTD.length; i++) {
        ms.push({ lat: parseFloat(latTD[i].innerText),
                  lng: parseFloat(lngTD[i].innerText),
                  weight: wTD[i].innerText + " kg"});
      }

      console.log(ms);

      function initMap() {

        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 50.061769, lng: 19.939370},
          zoom: 15
          });

        for (var i = 0; i < ms.length; i++) {
          new google.maps.Marker({
            position: {lat: ms[i].lat, lng: ms[i].lng},
            map: map,
            title: ms[i].weight
          });
        }
      }
    </script>
    <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAjA3XDzwn8tSOxPpEWruNQfP9AFrSBXZc&callback=initMap">
    </script>


</html>
